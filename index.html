<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>totalcoin API Flowchart - Flujograma Interactivo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="images/Logo Completo Slogan nuevo.svg" alt="totalcoin Logo" class="logo">
            </div>
            <div class="nav-title">
                <h1 data-translate="API Integration Flowchart"><strong>totalcoin</strong> API Integration Flowchart</h1>
                <p data-translate="Flujograma Interactivo de Integraciones">Flujograma Interactivo de Integraciones</p>
            </div>
            <div class="navbar-controls">
                <button id="language-toggle" class="language-btn">English</button>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="sidebar">
            <h3 data-translate="Tipos de Integraci√≥n">Tipos de Integraci√≥n</h3>
            <div class="integration-buttons">
                <button class="integration-btn active" data-flow="cashin-auto">Cashin - Conciliaci√≥n Autom√°tica</button>
                <button class="integration-btn" data-flow="cashin-qr">Cashin - Pre-√≥rdenes con QR</button>
                <button class="integration-btn" data-flow="webhook">Notificaciones Webhook</button>
                <button class="integration-btn" data-flow="cashout">Cashout - Realizar Pagos</button>
            </div>
            
            <!-- Secci√≥n de animaci√≥n comentada temporalmente para agregar link externo de Figma m√°s adelante
            <div class="animation-section">
                <h4 data-translate="üé¨ Visualizaci√≥n Animada">üé¨ Visualizaci√≥n Animada</h4>
                <button class="animation-btn" id="animation-btn">
                    <span class="btn-text" data-translate="Ver Flujo del Dinero">Ver Flujo del Dinero</span>
                    <span class="btn-subtitle" data-translate="Animaci√≥n interactiva">Animaci√≥n interactiva</span>
                </button>
            </div>
            -->
            
            <div class="info-panel">
                <h4 data-translate="Informaci√≥n">Informaci√≥n</h4>
                <div id="flow-info">
                    <p data-translate="Selecciona un tipo de integraci√≥n para ver el flujo detallado.">Selecciona un tipo de integraci√≥n para ver el flujo detallado.</p>
                </div>
                <div class="documentation-links">
                    <h5 data-translate="Documentaci√≥n T√©cnica">Documentaci√≥n T√©cnica</h5>
                    <a href="https://apidocs.totalcoin.com/integrations/pre_orders/es/index.html" target="_blank" class="doc-link" id="doc-cashin-automatic" data-translate="üìÑ Conciliaci√≥n Autom√°tica">üìÑ Conciliaci√≥n Autom√°tica</a>
                    <a href="https://apidocs.totalcoin.com/integrations/pre_orders_qr/es/index.html" target="_blank" class="doc-link" id="doc-cashin-qr" data-translate="üìÑ Pre-√≥rdenes con QR">üìÑ Pre-√≥rdenes con QR</a>
                    <a href="https://apidocs.totalcoin.com/integrations/webhooks/es/index.html" target="_blank" class="doc-link" id="doc-webhook" data-translate="üìÑ Notificaciones Webhook">üìÑ Notificaciones Webhook</a>
                    <a href="https://apidocs.totalcoin.com/integrations/cashout/es/index.html" target="_blank" class="doc-link" id="doc-cashout" data-translate="üìÑ Realizar Pagos">üìÑ Realizar Pagos</a>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="flowchart-container">
                <!-- Cashin - Conciliaci√≥n Autom√°tica -->
                <div id="cashin-auto" class="flow-diagram active">
                    <h2 data-translate="Cashin - Conciliaci√≥n Autom√°tica">Cashin - Conciliaci√≥n Autom√°tica</h2>
                    <div class="flow-steps">
                        <div class="step" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4 data-translate="Autenticaci√≥n">Autenticaci√≥n</h4>
                                <p data-translate="Inicias sesi√≥n con tu usuario y contrase√±a">Inicias sesi√≥n con tu usuario y contrase√±a</p>
                                <div class="step-details">
                                    <code>POST /api/auth/login
{"username": "", "password": ""}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4 data-translate="Crear Pre-Orden">Crear Pre-Orden</h4>
                                <p data-translate="Le informas a totalcoin que vas a recibir un pago">Le informas a <strong>totalcoin</strong> que vas a recibir un pago</p>
                                <div class="step-details">
                                    <code>POST /api/conciliacionAutomaticaV2/cashRequest
{
  "OperationId": "string",
  "Amount": 0,
  "DNI": "string",
  "CompanyReferenceToConciliate": ""
}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4 data-translate="Usuario Realiza Pago">Usuario Realiza Pago</h4>
                                <p data-translate="Tu cliente paga con transferencia, QR o tarjeta">Tu cliente paga con transferencia, QR o tarjeta</p>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4 data-translate="Conciliaci√≥n Autom√°tica">Conciliaci√≥n Autom√°tica</h4>
                                <p data-translate="totalcoin encuentra y confirma el pago autom√°ticamente"><strong>totalcoin</strong> encuentra y confirma el pago autom√°ticamente</p>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="5">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h4 data-translate="Notificaci√≥n Webhook">Notificaci√≥n Webhook</h4>
                                <p data-translate="totalcoin te avisa que el pago lleg√≥"><strong>totalcoin</strong> te avisa que el pago lleg√≥</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cashin - Pre-√≥rdenes con QR -->
                <div id="cashin-qr" class="flow-diagram">
                    <h2 data-translate="Cashin - Pre-√≥rdenes con QR">Cashin - Pre-√≥rdenes con QR</h2>
                    <div class="flow-steps">
                        <div class="step" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4 data-translate="Autenticaci√≥n">Autenticaci√≥n</h4>
                                <p data-translate="Inicias sesi√≥n con tu usuario y contrase√±a">Inicias sesi√≥n con tu usuario y contrase√±a</p>
                                <div class="step-details">
                                    <code>POST /api/auth/login
{"username": "", "password": ""}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4 data-translate="Crear Pre-Orden con QR">Crear Pre-Orden con QR</h4>
                                <p data-translate="Creas un pedido y totalcoin genera un c√≥digo QR">Creas un pedido y <strong>totalcoin</strong> genera un c√≥digo QR</p>
                                <div class="step-details">
                                    <code>POST /api/iep/pre-order
{
  "concept": "test-jpgq",
  "expirationDate": "2025-03-26T17:23:14.099Z",
  "businessUnit": 348,
  "externalReference": "JPGQ_PAYMENT_001",
  "qrAmountType": "closed",
  "amount": 10,
  "qrType": "static",
  "resetOnPayment": true,
  "operationId": "ca8964d1-b90b-4583-98da-bfc7f757d6e7",
  "dni": "27594189",
  "companyReferenceToConciliate": "OP:000001110001"
}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4 data-translate="Generar C√≥digo QR">Generar C√≥digo QR</h4>
                                <p data-translate="totalcoin crea autom√°ticamente el c√≥digo QR"><strong>totalcoin</strong> crea autom√°ticamente el c√≥digo QR</p>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4 data-translate="Usuario Escanea QR">Usuario Escanea QR</h4>
                                <p data-translate="Tu cliente escanea el QR y paga desde su celular">Tu cliente escanea el QR y paga desde su celular</p>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="5">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h4 data-translate="Procesamiento y Notificaci√≥n">Procesamiento y Notificaci√≥n</h4>
                                <p data-translate="totalcoin procesa el pago y te avisa"><strong>totalcoin</strong> procesa el pago y te avisa</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Notificaciones Webhook -->
                <div id="webhook" class="flow-diagram">
                    <h2 data-translate="Notificaciones Webhook">Notificaciones Webhook</h2>
                    <div class="flow-steps">
                        <div class="step" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4 data-translate="Configurar Webhook">Configurar Webhook</h4>
                                <p data-translate="Le informas a totalcoin d√≥nde enviarte las notificaciones">Le informas a <strong>totalcoin</strong> d√≥nde enviarte las notificaciones</p>
                                <div class="step-details">
                                    <code>POST /api/webhooks/configure
{
  "url": "https://tu-servidor.com/webhook",
  "events": ["payment.completed", "payment.failed"]
}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4 data-translate="Evento de Pago">Evento de Pago</h4>
                                <p data-translate="Sucede algo importante (pago exitoso o fallido)">Sucede algo importante (pago exitoso o fallido)</p>
                                <div class="step-details">
                                    <p>Canales: Transferencia bancaria, QR, Tarjeta</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4 data-translate="totalcoin Env√≠a Webhook"><strong>totalcoin</strong> Env√≠a Webhook</h4>
                                <p data-translate="totalcoin te manda autom√°ticamente la informaci√≥n"><strong>totalcoin</strong> te manda autom√°ticamente la informaci√≥n</p>
                                <div class="step-details">
                                    <code>POST a tu endpoint configurado
{
  "Concepto": "1234567890",
  "Referencia": "0000004053",
  "Monto": 1000,
  "MontoNeto": 937.2,
  "Estado": "APROBADO",
  "MetodoPago": "TARJETA",
  "FechaCreacion": "11/19/2025 16:40:20"
}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4 data-translate="Tu Sistema Responde">Tu Sistema Responde</h4>
                                <p data-translate="Tu servidor confirma que recibi√≥ la notificaci√≥n">Tu servidor confirma que recibi√≥ la notificaci√≥n</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cashout - Realizar Pagos -->
                <div id="cashout" class="flow-diagram">
                    <h2 data-translate="Cashout - Realizar Pagos">Cashout - Realizar Pagos</h2>
                    <div class="flow-steps">
                        <div class="step" data-step="1">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4 data-translate="Autenticaci√≥n">Autenticaci√≥n</h4>
                                <p data-translate="Inicias sesi√≥n con tu usuario y contrase√±a">Inicias sesi√≥n con tu usuario y contrase√±a</p>
                                <div class="step-details">
                                    <code>POST /api/auth/login
{"username": "", "password": ""}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="2">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4 data-translate="Realizar Pago">Realizar Pago</h4>
                                <p data-translate="Le ped√≠s a totalcoin que haga un pago">Le ped√≠s a <strong>totalcoin</strong> que haga un pago</p>
                                <div class="step-details">
                                    <code>POST /api/payments/transactions
{
  "alias": "",
  "cbucvu": "",
  "cuitcuil": "",
  "amount": 0,
  "reference": "",
  "notificationUrl": ""
}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="3">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4 data-translate="Procesamiento">Procesamiento</h4>
                                <p data-translate="totalcoin revisa que todo est√© bien y procesa"><strong>totalcoin</strong> revisa que todo est√© bien y procesa</p>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="4">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4 data-translate="Respuesta">Respuesta</h4>
                                <p data-translate="totalcoin env√≠a el dinero al destinatario"><strong>totalcoin</strong> env√≠a el dinero al destinatario</p>
                                <div class="step-details">
                                    <code>{"id": "transaction_id"}</code>
                                </div>
                            </div>
                        </div>
                        
                        <div class="arrow">‚Üì</div>
                        
                        <div class="step" data-step="5">
                            <div class="step-number">5</div>
                            <div class="step-content">
                                <h4 data-translate="Notificaci√≥n de Resultado">Notificaci√≥n de Resultado</h4>
                                <p data-translate="totalcoin te confirma que el pago se realiz√≥"><strong>totalcoin</strong> te confirma que el pago se realiz√≥</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Secci√≥n de Animaci√≥n del Flujo del Dinero -->
                <div id="animation-visualization" class="animation-container">
                    <h2 data-translate="Flujo del Dinero - Visualizaci√≥n Animada">üí∞ Flujo del Dinero - Visualizaci√≥n Animada</h2>
                    <div class="animation-controls">
                        <button class="control-btn" id="play-btn" data-translate="‚ñ∂Ô∏è Reproducir">‚ñ∂Ô∏è Reproducir</button>
                        <button class="control-btn" id="pause-btn" data-translate="‚è∏Ô∏è Pausar">‚è∏Ô∏è Pausar</button>
                        <button class="control-btn" id="reset-btn" data-translate="üîÑ Reiniciar">üîÑ Reiniciar</button>
                        <select class="flow-selector" id="flow-selector">
                            <option value="cashin-auto" data-translate="Cashin - Conciliaci√≥n Autom√°tica">Cashin - Conciliaci√≥n Autom√°tica</option>
                            <option value="cashin-qr" data-translate="Cashin - Pre-√≥rdenes con QR">Cashin - Pre-√≥rdenes con QR</option>
                            <option value="webhook" data-translate="Notificaciones Webhook">Notificaciones Webhook</option>
                            <option value="cashout" data-translate="Cashout - Realizar Pagos">Cashout - Realizar Pagos</option>
                        </select>
                        <div class="speed-control">
                            <label for="speed-slider" id="speed-label" data-translate="Velocidad:">Velocidad: 1x</label>
                            <input type="range" id="speed-slider" min="0.25" max="1.5" step="0.25" value="1">
                        </div>
                    </div>
                    
                    <div class="animation-stage" id="animation-stage">
                        <!-- Elementos del sistema -->
                        <div class="system-element client-system" id="client-system" data-element="client">
                            <div class="element-icon">üè¢</div>
                            <div class="element-label" data-translate="Tu Sistema">Tu Sistema</div>
                        </div>
                        
                        <div class="system-element totalcoin-system" id="totalcoin-system" data-element="totalcoin">
                            <div class="element-icon">üè¶</div>
                            <div class="element-label" data-translate="totalcoin">totalcoin</div>
                        </div>
                        
                        <div class="system-element user-system" id="user-system" data-element="user">
                            <div class="element-icon">üë§</div>
                            <div class="element-label" data-translate="Usuario Final">Usuario Final</div>
                        </div>
                        
                        <div class="system-element bank-system" id="bank-system" data-element="bank">
                            <div class="element-icon">üèõÔ∏è</div>
                            <div class="element-label" data-translate="Sistema Bancario">Sistema Bancario</div>
                        </div>
                        
                        <!-- Contenedor de flecha animada -->
                        <div class="arrow-container" id="arrow-container">
                            <div class="flow-arrow">
                                <div class="arrow-line"></div>
                                <div class="arrow-head"></div>
                            </div>
                        </div>
                        
                        <!-- Spinner para procesamiento -->
                        <div class="processing-spinner" id="processing-spinner">
                            <div class="spinner-circle"></div>
                            <div class="spinner-text" data-translate="Procesando...">Procesando...</div>
                        </div>
                        
                        <!-- Indicadores de proceso -->
                        <div class="process-indicator" id="process-indicator">
                            <div class="indicator-text">Procesando...</div>
                            <div class="loading-spinner"></div>
                        </div>
                        
                        <!-- Notificaciones animadas -->
                        <div class="notification-popup" id="notification-popup">
                            <div class="notification-icon">üìß</div>
                            <div class="notification-text" data-translate="Notificaci√≥n enviada">Notificaci√≥n enviada</div>
                        </div>
                    </div>
                    
                    <div class="animation-timeline" id="timeline">
                        <div class="timeline-step" data-step="1">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label" data-translate="Autenticaci√≥n">Autenticaci√≥n</div>
                        </div>
                        <div class="timeline-step" data-step="2">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label" data-translate="Crear Pre-orden">Crear Pre-orden</div>
                        </div>
                        <div class="timeline-step" data-step="3">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label" data-translate="Pago Usuario">Pago Usuario</div>
                        </div>
                        <div class="timeline-step" data-step="4">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label" data-translate="Procesamiento">Procesamiento</div>
                        </div>
                        <div class="timeline-step" data-step="5">
                            <div class="timeline-dot"></div>
                            <div class="timeline-label" data-translate="Notificaci√≥n">Notificaci√≥n</div>
                        </div>
                    </div>
                    
                    <div class="animation-info" id="animation-info">
                        <h4 data-translate="Informaci√≥n del Paso Actual">Informaci√≥n del Paso Actual</h4>
                        <div class="current-step-info" id="current-step-info">
                            <p data-translate="Selecciona un flujo y presiona reproducir para ver la animaci√≥n del movimiento del dinero.">Selecciona un flujo y presiona reproducir para ver la animaci√≥n del movimiento del dinero.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="step-modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>